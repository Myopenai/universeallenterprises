{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Runtime Profile Node",
  "required": ["id", "type", "version", "scope", "meta", "data"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^settings://"
    },
    "type": {
      "type": "string",
      "const": "runtime.profile"
    },
    "version": {
      "type": "string"
    },
    "scope": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "meta": {
      "type": "object",
      "required": ["owner", "createdAt", "checksum"],
      "properties": {
        "owner": { "type": "string" },
        "createdAt": { "type": "string" },
        "updatedAt": { "type": "string" },
        "checksum": { "type": "string" },
        "description": { "type": "string" }
      }
    },
    "dimensions": {
      "type": "object",
      "properties": {
        "latency": { "$ref": "#/definitions/dimensionalValue" },
        "cost": { "$ref": "#/definitions/dimensionalValue" },
        "energy": { "$ref": "#/definitions/dimensionalValue" },
        "throughput": { "$ref": "#/definitions/dimensionalValue" }
      }
    },
    "dependencies": {
      "type": "array",
      "items": { "$ref": "#/definitions/dependencyEdge" }
    },
    "semantics": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "expression": { "type": "string" },
          "description": { "type": "string" }
        }
      }
    },
    "data": {
      "type": "object",
      "required": ["profile"],
      "properties": {
        "profile": {
          "type": "string",
          "enum": ["ai-lab", "microservice", "data-pipeline", "sdr-stack", "frontend-only"]
        },
        "riskLevel": {
          "type": "string",
          "enum": ["low", "medium", "high"]
        },
        "energyProfile": {
          "type": "string",
          "enum": ["low", "medium", "high"]
        },
        "dataSensitivity": {
          "type": "string",
          "enum": ["public", "internal", "confidential", "restricted"]
        }
      }
    }
  },
  "definitions": {
    "dimensionalValue": {
      "type": "object",
      "required": ["value", "unit"],
      "properties": {
        "value": { "type": "number" },
        "unit": { "type": "string" },
        "constraints": {
          "type": "object",
          "properties": {
            "min": { "type": "number" },
            "max": { "type": "number" },
            "target": { "type": "number" }
          }
        }
      }
    },
    "dependencyEdge": {
      "type": "object",
      "required": ["target", "edge"],
      "properties": {
        "target": { "type": "string" },
        "edge": {
          "type": "string",
          "enum": ["requires", "provides", "conflicts", "binds", "routes-to", "depends-on", "uses"]
        },
        "constraints": { "type": "object" },
        "required": { "type": "boolean" }
      }
    }
  }
}








