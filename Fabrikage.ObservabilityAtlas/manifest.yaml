# ============================================================================
# FABRIKAGE.OBSERVABILITYATLAS - METRIKEN UND LOGS
# TOGETHERSYSTEMS. INTERNATIONAL TTT
# Industrielle Softwarefabrik - Observability, SLO/SLI, Timeline
# ============================================================================

version: "1.0.0"
name: "Fabrikage.ObservabilityAtlas"
description: "Metriken, Logs, Traces, SLO/SLI, Timeline-Reports"
status: "PERMANENT-ACTIVE"
mandatory: true

# ============================================================================
# METRIKEN
# ============================================================================

metrics:
  collectors:
    - name: "response_time"
      type: "histogram"
      buckets: [50, 100, 200, 500, 1000, 5000]
    
    - name: "error_rate"
      type: "counter"
      labels: ["status_code", "endpoint"]
    
    - name: "active_users"
      type: "gauge"
    
    - name: "accessibility_score"
      type: "gauge"
      min: 0
      max: 100
    
    - name: "security_score"
      type: "gauge"
      min: 0
      max: 100
  
  storage:
    path: "metrics/"
    format: "prometheus"

# ============================================================================
# LOGS
# ============================================================================

logs:
  levels:
    - debug
    - info
    - warn
    - error
    - fatal
  
  format: "json"
  structured: true
  
  paths:
    - application: "logs/application/"
    - audit: "logs/audit/"
    - security: "logs/security/"
    - performance: "logs/performance/"
  
  retention:
    application: "90d"
    audit: "365d"
    security: "365d"
    performance: "30d"

# ============================================================================
# TRACES
# ============================================================================

traces:
  enabled: true
  format: "opentelemetry"
  
  sampling:
    rate: 0.1
    head_based: true
  
  correlation:
    trace_ids: true
    span_ids: true
    parent_span_ids: true
  
  storage:
    path: "traces/"

# ============================================================================
# SLO/SLI
# ============================================================================

slo:
  definitions:
    - name: "availability"
      target: 0.999
      window: "30d"
    
    - name: "latency_p99"
      target: "< 500ms"
      window: "1h"
    
    - name: "error_rate"
      target: "< 0.1%"
      window: "1h"
    
    - name: "accessibility_compliance"
      target: "100%"
      window: "1d"
  
  error_budget:
    enabled: true
    tracking: true
    alerts: true

# ============================================================================
# TIMELINE-REPORTS
# ============================================================================

timeline:
  enabled: true
  precision: "second"
  
  events:
    - build_start
    - build_end
    - test_start
    - test_end
    - deploy_start
    - deploy_end
    - verify_start
    - verify_end
  
  reports:
    path: "reports/timeline/"
    format: "json"
    visualization: true

# ============================================================================
# QUALITY-TRENDS
# ============================================================================

quality_trends:
  enabled: true
  metrics:
    - accessibility_score
    - security_score
    - test_coverage
    - error_rate
    - performance_score
  
  reports:
    path: "reports/quality-trends/"
    format: "json"
    visualization: true
  
  alerts:
    regression: true
    improvement: true

# ============================================================================
# RUNTIME-BUDGET
# ============================================================================

runtime_budget:
  enabled: true
  path: "reports/runtime-budget.json"
  
  phases:
    - validate: "2m"
    - generate: "10m"
    - build: "15m"
    - test: "20m"
    - scan: "5m"
    - package: "3m"
    - sign: "1m"
    - deploy: "5m"
  
  risk_scores:
    per_gate: true
    per_phase: true

# ============================================================================
# FEHLERQUELLENQUOTE
# ============================================================================

error_quotient:
  enabled: true
  path: "reports/quality.json"
  
  categories:
    - accessibility
    - security
    - lint
    - tests
    - performance
  
  tracking:
    - correction_paths: true
    - residual_risk: true
    - trends: true

# ============================================================================
# KOSTEN/NUTZEN-MATRIX
# ============================================================================

cost_benefit:
  enabled: true
  path: "reports/cost-benefit.json"
  
  factors:
    - resource_consumption
    - outage_costs
    - optimization_impact
  
  prioritization:
    automatic: true
    planner_integration: true

