<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CLOUDFLARE-PAGES-CHECKLIST</title>
<style>
body { font-family: system-ui; max-width: 800px; margin: 0 auto; padding: 20px; }
pre { background: #f5f5f5; padding: 10px; border-radius: 5px; overflow-x: auto; }
code { background: #f5f5f5; padding: 2px 4px; border-radius: 3px; }
</style>
</head>
<body>
<h1>Cloudflare Pages Checklist - Was wurde gemacht & was ist zu beachten</h1>

<h2>âœ… Bereits erledigt fÃ¼r Cloudflare Pages</h2>

<h3>1. 404-Funktion aktualisiert âœ…</h3>
- <strong>Datei:</strong> `functions/404.js`
- <strong>Ã„nderungen:</strong>
  - Telbank-Redirects hinzugefÃ¼gt
  - OneNetwork-Redirects hinzugefÃ¼gt
  - Case-insensitive Fallbacks
  - Telbank-Link in 404-Seite hinzugefÃ¼gt

<h3>2. Links korrigiert âœ…</h3>
- <strong>Alle HTML-Dateien:</strong> Links von `./TELBANK/index.html` auf `TELBANK/index.html`
- <strong>Funktioniert auf:</strong> Cloudflare Pages UND GitHub Pages
- <strong>Grund:</strong> Relative Pfade funktionieren auf beiden Plattformen

<h3>3. API-Calls konfiguriert âœ…</h3>
- <strong>GitHub Pages:</strong> API-Calls deaktiviert (keine Serverless Functions)
- <strong>Cloudflare Pages:</strong> API-Calls aktiviert (Functions verfÃ¼gbar)
- <strong>Erkennung:</strong> Automatisch via `location.hostname.includes('pages.dev')`

---

<h2>ğŸ”§ Cloudflare Pages Deployment</h2>

<h3>Aktuelles Setup</h3>
- <strong>Projekt-Name:</strong> `ts-portal`
- <strong>Deployment-Skript:</strong> `deploy.ps1`
- <strong>GitHub Actions:</strong> `.github/workflows/deploy.yml`

<h3>Deployment-Befehl</h3>
```powershell
wrangler pages deploy . --project-name ts-portal
```

<h3>Wichtige Hinweise</h3>
1. <strong>BACKUPS-Ordner:</strong> Sollte NICHT im Projekt sein (DateigrÃ¶ÃŸen-Limit 25MB)
2. <strong>Functions:</strong> Werden automatisch aus `functions/` deployt
3. <strong>D1-Datenbank:</strong> Muss separat konfiguriert werden (Binding im Cloudflare Dashboard)

---

<h2>ğŸ“‹ Was funktioniert auf Cloudflare Pages</h2>

<h3>âœ… Funktioniert</h3>
- <strong>404-Handler:</strong> `functions/404.js` fÃ¤ngt 404-Fehler ab
- <strong>API-Endpoints:</strong> `/api/presence/<em>`, `/api/voucher/</em>`, `/api/telbank/*`, etc.
- <strong>WebSocket:</strong> `/ws` (via `functions/ws.js`)
- <strong>Links:</strong> Telbank & OneNetwork funktionieren
- <strong>Bilder:</strong> Fallbacks implementiert

<h3>âš ï¸ Zu beachten</h3>
- <strong>D1-Datenbank:</strong> Muss im Cloudflare Dashboard konfiguriert sein
- <strong>R2-Bucket:</strong> Falls verwendet, muss Binding gesetzt sein
- <strong>Umgebungsvariablen:</strong> `TS_API_KEY` etc. mÃ¼ssen im Dashboard gesetzt sein

---

<h2>ğŸš€ NÃ¤chste Schritte fÃ¼r Cloudflare Pages</h2>

1. âœ… <strong>404-Funktion:</strong> Bereits aktualisiert
2. âœ… <strong>Links:</strong> Bereits korrigiert
3. â­ <strong>Deployment:</strong> `.\deploy.ps1` ausfÃ¼hren
4. â­ <strong>Tests:</strong> Nach Deployment testen

---

<h2>ğŸ“ Unterschiede: GitHub Pages vs. Cloudflare Pages</h2>

| Feature | GitHub Pages | Cloudflare Pages |
|---------|--------------|------------------|
| <strong>API-Calls</strong> | âŒ Deaktiviert | âœ… Aktiviert |
| <strong>404-Handler</strong> | âŒ Nicht verfÃ¼gbar | âœ… `functions/404.js` |
| <strong>WebSocket</strong> | âŒ Nicht verfÃ¼gbar | âœ… `functions/ws.js` |
| <strong>Links</strong> | âœ… Funktioniert | âœ… Funktioniert |
| <strong>Bilder</strong> | âœ… Mit Fallbacks | âœ… Mit Fallbacks |

---

<h2>âœ… Status</h2>

- âœ… <strong>404-Funktion:</strong> Aktualisiert fÃ¼r Cloudflare Pages
- âœ… <strong>Links:</strong> Korrigiert (funktioniert auf beiden Plattformen)
- âœ… <strong>API-Erkennung:</strong> Automatisch (GitHub Pages = deaktiviert, Cloudflare = aktiviert)
- âœ… <strong>Deployment-Skript:</strong> Bereit (`deploy.ps1`)

<strong>Alles ist bereit fÃ¼r Cloudflare Pages!</strong> ğŸš€
</body>
</html>