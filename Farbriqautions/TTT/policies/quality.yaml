# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║  TOGETHERSYSTEMS QUALITY POLICIES                                          ║
# ║  [.TTT T,.&T,,.T,,,.T.] © 2025 Raymond Demitrio Tel                       ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

policy:
  name: "quality"
  version: "1.0.0"
  description: "Code quality and testing policies"
  enforce: true

# ═══════════════════════════════════════════════════════════════════════════
# CODE COVERAGE
# ═══════════════════════════════════════════════════════════════════════════

coverage:
  minimum:
    overall: 80
    per_file: 70
    new_code: 90
  
  exclude:
    - "node_modules/**"
    - "vendor/**"
    - "dist/**"
    - "docs_build/**"
    - "**/*.test.js"
    - "**/*.spec.js"

# ═══════════════════════════════════════════════════════════════════════════
# TESTING REQUIREMENTS
# ═══════════════════════════════════════════════════════════════════════════

testing:
  unit:
    required: true
    framework: "jest"
    timeout: "30s"
    
  integration:
    required: true
    timeout: "5m"
    
  e2e:
    required: false
    framework: "playwright"
    timeout: "10m"
    
  performance:
    required: false
    tool: "lighthouse"
    thresholds:
      performance: 90
      accessibility: 90
      best_practices: 90
      seo: 90

# ═══════════════════════════════════════════════════════════════════════════
# LINTING
# ═══════════════════════════════════════════════════════════════════════════

linting:
  javascript:
    enabled: true
    tool: "eslint"
    config: ".eslintrc.js"
    max_errors: 0
    max_warnings: 10
    
  css:
    enabled: true
    tool: "stylelint"
    max_errors: 0
    
  markdown:
    enabled: true
    tool: "markdownlint"
    max_errors: 0
    
  yaml:
    enabled: true
    tool: "yamllint"
    max_errors: 0

# ═══════════════════════════════════════════════════════════════════════════
# CODE COMPLEXITY
# ═══════════════════════════════════════════════════════════════════════════

complexity:
  cyclomatic:
    max: 10
    warn: 7
    
  cognitive:
    max: 15
    warn: 10
    
  nesting:
    max_depth: 4
    
  function_length:
    max_lines: 50
    warn_lines: 30
    
  file_length:
    max_lines: 500
    warn_lines: 300

# ═══════════════════════════════════════════════════════════════════════════
# DUPLICATION
# ═══════════════════════════════════════════════════════════════════════════

duplication:
  max_percentage: 3
  min_tokens: 50
  ignore:
    - "**/*.test.js"
    - "**/*.spec.js"
    - "**/fixtures/**"

# ═══════════════════════════════════════════════════════════════════════════
# ENCODING
# ═══════════════════════════════════════════════════════════════════════════

encoding:
  required: "utf-8"
  bom: false
  line_endings: "lf"
  enforce: true

# ═══════════════════════════════════════════════════════════════════════════
# DOCUMENTATION
# ═══════════════════════════════════════════════════════════════════════════

documentation:
  readme:
    required: true
    min_length: 500
    
  changelog:
    required: true
    format: "keep-a-changelog"
    
  api_docs:
    required: false
    tool: "jsdoc"
    
  inline_comments:
    min_ratio: 0.05  # 5% of code

# ═══════════════════════════════════════════════════════════════════════════
# COMMIT QUALITY
# ═══════════════════════════════════════════════════════════════════════════

commits:
  conventional:
    enabled: true
    types:
      - feat
      - fix
      - docs
      - style
      - refactor
      - perf
      - test
      - chore
      - ci
      
  message:
    max_subject_length: 72
    require_body: false
    
  signing:
    required: false
    gpg: false

# ═══════════════════════════════════════════════════════════════════════════
# BRANCH PROTECTION
# ═══════════════════════════════════════════════════════════════════════════

branches:
  main:
    protected: true
    require_review: 1
    require_passing_checks: true
    require_signed_commits: false
    
  develop:
    protected: false
    require_review: 0
    require_passing_checks: true

# ═══════════════════════════════════════════════════════════════════════════
# PERFORMANCE BUDGETS
# ═══════════════════════════════════════════════════════════════════════════

performance:
  budgets:
    - type: "bundle"
      max_size: "500KB"
      
    - type: "image"
      max_size: "200KB"
      
    - type: "font"
      max_size: "100KB"
      
    - type: "total"
      max_size: "2MB"
      
  metrics:
    lcp: 2500  # Largest Contentful Paint (ms)
    fid: 100   # First Input Delay (ms)
    cls: 0.1   # Cumulative Layout Shift
    ttfb: 600  # Time to First Byte (ms)

